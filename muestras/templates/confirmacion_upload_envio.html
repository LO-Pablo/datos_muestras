{% extends "master.html" %}

{% block title %}
Confirmaci√≥n subida excel envios
{% endblock %}
{% load static %}
{% block content %}
<!-- P√°gina de confirmaci√≥n para la subida de un excel para el env√≠o de muestras -->
 <link rel ="stylesheet" href="{% static 'forms.css' %}">
<div class="form-container">

    <!-- CABECERA -->
    <div class="form-header">
        <h1>‚úÖ Confirmaci√≥n de subida de Excel de env√≠os</h1>
        <p class="form-subtitle">
            Revise los resultados de validaci√≥n antes de confirmar el env√≠o de muestras.
        </p>
    </div>

    <!-- MENSAJES DEL SISTEMA -->
    {% if messages %}
    <div class="form-card messages-card">
        <h2>üì¢ Mensajes</h2>
        {% for message in messages %}
            <p class="message-item">{{ message }}</p>
        {% endfor %}
    </div>
    {% endif %}

    <!-- INFORMACI√ìN DE ERRORES -->
    <div class="form-card info-card">
        <h2>‚ÑπÔ∏è Resultado de la validaci√≥n del Excel</h2>

        <p>
            Se ha generado un archivo Excel donde se marcan las filas con problemas
            detectados durante la validaci√≥n:
        </p>

        <ul class="requirements-list">
            <li>
                <strong style="color:#d32f2f;">Filas en rojo</strong>:
                indican alg√∫n error, se se√±ala el campo en el que sucede el error y en la columna de "Errores" se comenta el error. 
            </li>
        </ul>

        <p class="note warning">
            ‚ö†Ô∏è Las muestras que contengan cualquiera de estos errores
            <strong>no se incluir√°n en este env√≠o</strong> y deber√°n
            corregirse y enviarse en un nuevo proceso.
        </p>
    </div>

    <!-- DESCARGA DE EXCEL DE ERRORES -->
    <div class="form-card">
        <h2>üìÑ Excel con errores</h2>

        <form method="post">
            {% csrf_token %}
            <button name="excel_errores"
                    type="submit"
                    class="accion-btn accion-secundaria">
                ‚¨áÔ∏è Descargar Excel con errores
            </button>
        </form>
    </div>

    <!-- CONFIRMACI√ìN -->
    <div class="form-card confirm-card">
        <h2>‚ùì Confirmaci√≥n</h2>
        <p>¬øDesea continuar con el env√≠o de las muestras v√°lidas?</p>

        <form method="post" class="form-actions">
            {% csrf_token %}

            <button type="submit"
                    name="confirmar"
                    class="accion-btn accion-primaria">
                üì§ Confirmar env√≠o
            </button>

            <button type="submit"
                    name="cancelar"
                    class="accion-btn accion-peligro">
                ‚ùå Cancelar
            </button>
        </form>
    </div>

    <!-- VOLVER -->
    <div class="form-actions">
        <a href="/muestras" class="accion-btn accion-secundaria">
            ‚Ü© Volver a muestras
        </a>
    </div>

</div>

{% endblock %}